# ===========================================
# DATABASE (Supabase PostgreSQL)
# ===========================================
# Get this from: Supabase Dashboard > Settings > Database > Connection string > URI
DATABASE_URL="postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres"

# ===========================================
# SUPABASE
# ===========================================
# Get these from: Supabase Dashboard > Settings > API
NEXT_PUBLIC_SUPABASE_URL="https://[PROJECT-REF].supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="eyJ..."
SUPABASE_SERVICE_ROLE_KEY="eyJ..."

# ===========================================
# APP
# ===========================================
# APP_URL est utilisé côté serveur (runtime) - PRIORITAIRE pour les emails
# NEXT_PUBLIC_APP_URL est utilisé côté client (build-time)
APP_URL="http://localhost:3000"
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# Upload directory (relative to project root)
UPLOAD_DIR="public/uploads"

# Backup directory (relative to project root)
BACKUP_DIR="backups"

# ===========================================
# OPENAI (pour transcription vocale)
# ===========================================
# Get this from: https://platform.openai.com/api-keys
# Pricing Whisper: ~$0.006/minute audio
OPENAI_API_KEY="sk-..."

# ===========================================
# BROKER SYNC (optionnel - pour connexion broker)
# ===========================================
# Clé de chiffrement pour les credentials broker (API keys)
# Générer avec: openssl rand -base64 32
# Si non défini, utilise SUPABASE_SERVICE_ROLE_KEY comme fallback
BROKER_ENCRYPTION_KEY=""

# TradeStation OAuth (pour intégration TradeStation)
# Get from: https://www.tradestation.com > Account Settings > API Access
# Create API Key with scopes: openid, profile, offline_access, ReadAccount
TRADESTATION_CLIENT_ID=""
TRADESTATION_CLIENT_SECRET=""
TRADESTATION_REDIRECT_URI="http://localhost:3000/api/broker/tradestation/callback"

# Charles Schwab OAuth (pour intégration Charles Schwab) - POST-LAUNCH
# Get from: https://developer.schwab.com > My Apps > Create Application
# Requires manual approval (1-3 days)
# Redirect URI must match exactly: https://yourdomain.com/api/broker/schwab/callback
SCHWAB_CLIENT_ID=""
SCHWAB_CLIENT_SECRET=""
SCHWAB_REDIRECT_URI="http://localhost:3000/api/broker/schwab/callback"

# ===========================================
# SCHEDULER (optionnel - pour sync automatique)
# ===========================================
# Secret pour protéger l'endpoint /api/scheduler/broker-sync
# Générer avec: openssl rand -base64 32
# Appelé par cron job ou Vercel Cron
SCHEDULER_SECRET=""
# Alternative pour Vercel Cron (automatiquement défini par Vercel)
# CRON_SECRET=""

# ===========================================
# STRIPE (pour abonnements SaaS)
# ===========================================
# Get these from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY="sk_live_..."
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_live_..."
# Get this from: https://dashboard.stripe.com/webhooks
# Créer un webhook endpoint: /api/stripe/webhook
# Events: checkout.session.completed, customer.subscription.*, invoice.*
STRIPE_WEBHOOK_SECRET="whsec_..."

# ===========================================
# GOOGLE CLOUD VISION (pour OCR avancé)
# ===========================================
# Option 1: Service Account JSON file path (recommandé pour production)
# Générer depuis: GCP Console > IAM > Service Accounts > Create Key
# Le fichier JSON doit être stocké en dehors du repo (jamais commité!)
GOOGLE_APPLICATION_CREDENTIALS="/path/to/service-account.json"

# Option 2: API Key (alternative plus simple pour développement)
# Générer depuis: GCP Console > APIs & Services > Credentials
# GOOGLE_VISION_API_KEY="AIza..."

# ===========================================
# MARKET DATA PROVIDERS (pour Replay & Backtesting)
# ===========================================
# Alpaca - FREE tier (IEX only, 200 req/min)
# Get from: https://app.alpaca.markets/ > API Keys
ALPACA_API_KEY=""
ALPACA_API_SECRET=""

# Polygon.io (now Massive.com) - Paid tiers ($29-$1999/mo)
# Get from: https://polygon.io/dashboard/api-keys
POLYGON_API_KEY="tVUSyZKlw_Mm7rizfgfseXeHzMiRPYNI"

# ===========================================
# REDIS (pour queues async BullMQ)
# ===========================================
# Option 1: Full URL (recommandé pour Upstash)
# Get from: https://console.upstash.com/ > Redis > Details > REST URL
REDIS_URL=""

# Option 2: Individual settings (pour Redis local ou self-hosted)
# REDIS_HOST="localhost"
# REDIS_PORT="6379"
# REDIS_PASSWORD=""
# REDIS_TLS="false"

# ===========================================
# OBSERVABILITY (logging, error tracking)
# ===========================================
# Sentry - Error Tracking (Story 1.9)
# Get from: https://sentry.io/settings/projects/{project}/keys/
SENTRY_DSN=""
NEXT_PUBLIC_SENTRY_DSN=""

# Sentry - Source Maps Upload (CI/CD only)
# Get from: https://sentry.io/settings/auth-tokens/
# Create a token with: project:releases, project:write, org:read
SENTRY_AUTH_TOKEN=""
SENTRY_ORG="trading-path"
SENTRY_PROJECT="trading-journal"

# Axiom - Centralized Logging (alternative: Logtail)
# Get from: https://app.axiom.co/settings/tokens
AXIOM_TOKEN=""
AXIOM_DATASET="trading-journal"
# Alternative: LOGTAIL_TOKEN=""

# Metrics API Key - For external monitoring tools to access /api/observability/metrics
# Generate with: openssl rand -base64 32
METRICS_API_KEY=""

# Alert Webhooks (Story 1.9)
# Slack Incoming Webhook
# Create at: https://api.slack.com/messaging/webhooks
SLACK_WEBHOOK_URL=""

# Discord Webhook
# Create at: Server Settings > Integrations > Webhooks
DISCORD_WEBHOOK_URL=""

# Alert Email Recipients (comma-separated)
ALERT_EMAIL_RECIPIENTS=""

# ===========================================
# TIMESCALEDB (pour Market Replay & Time-Series)
# ===========================================
# Dedicated TimescaleDB instance for tick data, replay, and backtesting
# Option 1: Timescale Cloud (recommended)
# Get from: https://console.cloud.timescale.com/ > Services > Connection Info
TIMESCALE_DATABASE_URL=""

# Feature flag to toggle between Supabase and TimescaleDB for tick data
# Set to "true" once TimescaleDB is validated in production
USE_TIMESCALEDB="false"

# ===========================================
# QDRANT (Vector DB pour recherche sémantique)
# ===========================================
# Option 1: Qdrant Cloud (recommended for production)
# Get from: https://cloud.qdrant.io/ > Cluster > API Key
QDRANT_URL="https://your-cluster.qdrant.io:6333"
QDRANT_API_KEY=""

# Option 2: Local Qdrant (for development)
# docker run -p 6333:6333 -p 6334:6334 qdrant/qdrant
# QDRANT_URL="http://localhost:6333"

# ===========================================
# GOOGLE GEMINI (pour AI Coach et Embeddings)
# ===========================================
# Get from: https://makersuite.google.com/app/apikey
GOOGLE_API_KEY=""

# ===========================================
# MIGRATION (optionnel - pour script de migration uniquement)
# ===========================================
# MYSQL_URL="mysql://user:password@host:port/database"

