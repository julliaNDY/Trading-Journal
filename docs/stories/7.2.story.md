# Story 7.2: WYSIWYG Editor - Daily Journal Enhancement

## Status

**Draft**

---

## Story

**As a** trader,  
**I want** an enhanced WYSIWYG editor for daily journal notes,  
**so that** I can format my journal entries with rich text.

---

## Acceptance Criteria

1. **AC1**: Éditeur WYSIWYG intégré dans page daily journal (remplace textarea).
2. **AC2**: Support formatage basique (bold, italic, lists, links).
3. **AC3**: Sauvegarde notes formatées (HTML ou Markdown).
4. **AC4**: Affichage notes formatées (rendering HTML/Markdown).
5. **AC5**: UI responsive (mobile, tablet, desktop).
6. **AC6**: Performance : chargement éditeur < 1s.

---

## Tasks / Subtasks

- [ ] **Task 1: WYSIWYG Editor Integration** (AC: 1)
  - [ ] 1.1 Choisir éditeur WYSIWYG (TipTap, Lexical, ou autre)
  - [ ] 1.2 Intégrer éditeur dans `src/components/journal/daily-journal-editor.tsx`
  - [ ] 1.3 Remplacer textarea par éditeur WYSIWYG (page journal)
  - [ ] 1.4 Configuration éditeur (toolbar, formats supportés)

- [ ] **Task 2: Basic Formatting** (AC: 2)
  - [ ] 2.1 Support formatage basique (bold, italic, underline)
  - [ ] 2.2 Support lists (ordered, unordered)
  - [ ] 2.3 Support links (URLs)
  - [ ] 2.4 Toolbar avec boutons formatage

- [ ] **Task 3: Save Formatting** (AC: 3)
  - [ ] 3.1 Sauvegarde notes formatées (HTML ou Markdown)
  - [ ] 3.2 Champs DayJournal.note (text) supporte HTML/Markdown
  - [ ] 3.3 Migration DB si nécessaire (support HTML)
  - [ ] 3.4 Action `updateDayJournal(date, note)` avec HTML/Markdown

- [ ] **Task 4: Display Formatted Notes** (AC: 4)
  - [ ] 4.1 Affichage notes formatées (rendering HTML/Markdown)
  - [ ] 4.2 Composant affichage (ReactMarkdown ou dangerouslySetInnerHTML)
  - [ ] 4.3 Styling notes formatées (CSS)
  - [ ] 4.4 Mode lecture (non-éditable)

- [ ] **Task 5: Responsive UI** (AC: 5)
  - [ ] 5.1 UI responsive (mobile, tablet, desktop)
  - [ ] 5.2 Toolbar adapté (mobile : menu dropdown)
  - [ ] 5.3 Tests responsive (breakpoints Tailwind)
  - [ ] 5.4 UX mobile (touch-friendly)

- [ ] **Task 6: Performance Optimization** (AC: 6)
  - [ ] 6.1 Optimiser chargement éditeur (< 1s)
  - [ ] 6.2 Lazy loading éditeur (load on focus)
  - [ ] 6.3 Benchmark performance (Lighthouse)
  - [ ] 6.4 Code splitting si nécessaire

---

## Dev Notes

- Dépendance : Epic 3 (Données collectées).
- WYSIWYG Editor : TipTap recommandé (React, TypeScript, extensible).
- Performance : lazy loading éditeur pour éviter latence initiale.
- Référencer `docs/roadmap-trading-path-journal.md` Phase 7 (WYSIWYG Editor).
