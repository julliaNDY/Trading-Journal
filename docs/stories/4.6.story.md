# Story 4.6: Future Simulators - Account Projection

## Status

**Draft**

---

## Story

**As a** trader,  
**I want** to simulate my account value in X months based on current stats,  
**so that** I can project future performance and set goals.

---

## Acceptance Criteria

1. **AC1**: Service Future Simulators créé dans `src/services/ai/future-simulator-service.ts`.
2. **AC2**: Simulation compte dans X mois (1, 3, 6, 12 mois).
3. **AC3**: Calcul basé sur stats actuelles (win rate, avg win/loss, trade frequency).
4. **AC4**: Projection conservatrice/optimiste/pessimiste (3 scénarios).
5. **AC5**: UI affiche projection (graphique + métriques).
6. **AC6**: Visualisation projection avec intervalles de confiance.

---

## Tasks / Subtasks

- [ ] **Task 1: Future Simulator Service** (AC: 1)
  - [ ] 1.1 Créer `src/services/ai/future-simulator-service.ts`
  - [ ] 1.2 Service simulation compte (calcul basé sur stats)
  - [ ] 1.3 Algorithme projection (Monte Carlo ou statistique simple)
  - [ ] 1.4 Support multiples scénarios (conservateur/optimiste/pessimiste)

- [ ] **Task 2: Account Projection** (AC: 2)
  - [ ] 2.1 Calcul projection compte dans X mois (1, 3, 6, 12)
  - [ ] 2.2 Basé sur stats actuelles (win rate, avg win/loss, trade frequency)
  - [ ] 2.3 Projection balance compte (currentBalance → futureBalance)
  - [ ] 2.4 Stocker projection en DB (table `FutureProjection` ou calcul à la volée)

- [ ] **Task 3: Statistics-Based Calculation** (AC: 3)
  - [ ] 3.1 Charger stats actuelles (win rate, avg win/loss, trade frequency)
  - [ ] 3.2 Calcul nombre trades estimés (basé sur frequency)
  - [ ] 3.3 Calcul PnL estimé (basé sur win rate + avg win/loss)
  - [ ] 3.4 Projection balance (currentBalance + PnL estimé)

- [ ] **Task 4: Multiple Scenarios** (AC: 4)
  - [ ] 4.1 Scénario conservateur (stats actuelles - variance)
  - [ ] 4.2 Scénario optimiste (stats actuelles + variance)
  - [ ] 4.3 Scénario pessimiste (stats actuelles - 2*variance)
  - [ ] 4.4 Calcul variance (basé sur historique volatilité)

- [ ] **Task 5: Projection UI** (AC: 5)
  - [ ] 5.1 Composant FutureSimulator dans `src/components/ai/future-simulator.tsx`
  - [ ] 5.2 Afficher projection (graphique + métriques)
  - [ ] 5.3 Sélection période (1, 3, 6, 12 mois)
  - [ ] 5.4 Page `/future-simulator` ou section dashboard

- [ ] **Task 6: Visualization** (AC: 6)
  - [ ] 6.1 Graphique projection (Recharts) avec 3 scénarios
  - [ ] 6.2 Intervalles de confiance (zone grise)
  - [ ] 6.3 Timeline projection (mois par mois)
  - [ ] 6.4 Métriques : balance projetée, trades estimés, PnL estimé

---

## Dev Notes

- Dépendance : Epic 3 (Données collectées pour stats).
- MVP : simulation simple (stats actuelles). Future : Monte Carlo simulation.
- Performance : calcul rapide (< 1s) pour éviter latence.
- Référencer `docs/roadmap-trading-path-journal.md` Phase 3 (Future Simulators).
