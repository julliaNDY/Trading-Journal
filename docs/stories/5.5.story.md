# Story 5.5: Analytics UI - Advanced Analytics Dashboard

## Status

**Draft**

---

## Story

**As a** trader,  
**I want** a comprehensive analytics dashboard with advanced metrics and visualizations,  
**so that** I can analyze my trading performance in depth.

---

## Acceptance Criteria

1. **AC1**: Page `/analytics` avec dashboard analytics avancées.
2. **AC2**: Sections : MFE/MAE, Exit Analysis, Risk Analysis, Liquidity Reports.
3. **AC3**: Filtres (date range, symbol, tags).
4. **AC4**: Visualisations détaillées (graphiques, tableaux).
5. **AC5**: Performance : queries analytiques < 1s (p95).
6. **AC6**: Visualisations fluides (60fps).

---

## Tasks / Subtasks

- [ ] **Task 1: Analytics Page** (AC: 1)
  - [ ] 1.1 Créer `src/app/(dashboard)/analytics/page.tsx`
  - [ ] 1.2 Layout dashboard (sections MFE/MAE, Exit, Risk, Liquidity)
  - [ ] 1.3 Navigation (ajouter route dans sidebar)
  - [ ] 1.4 Server component pour données initiales

- [ ] **Task 2: Analytics Sections** (AC: 2)
  - [ ] 2.1 Section MFE/MAE (Story 5.1)
  - [ ] 2.2 Section Exit Analysis (Story 5.2)
  - [ ] 2.3 Section Risk Analysis (Story 5.3)
  - [ ] 2.4 Section Liquidity Reports (Story 5.4)
  - [ ] 2.5 Tabs ou accordion pour navigation sections

- [ ] **Task 3: Filters** (AC: 3)
  - [ ] 3.1 Filtres date range (DatePicker)
  - [ ] 3.2 Filtres symbol (Select multi)
  - [ ] 3.3 Filtres tags (Select multi)
  - [ ] 3.4 Actions `getAnalyticsData(filters)` avec filtres
  - [ ] 3.5 URL params pour filtres (shareable links)

- [ ] **Task 4: Visualizations** (AC: 4)
  - [ ] 4.1 Graphiques (Recharts) : MFE/MAE, Exit, Risk, Liquidity
  - [ ] 4.2 Tableaux : trades avec métriques avancées
  - [ ] 4.3 Composants réutilisables (src/components/analytics/)
  - [ ] 4.4 UI shadcn/ui (Tables, Charts, Cards)

- [ ] **Task 5: Performance Optimization** (AC: 5)
  - [ ] 5.1 Optimiser queries analytiques (indexes, pré-calcul)
  - [ ] 5.2 Cache Redis pour résultats fréquents
  - [ ] 5.3 Benchmark queries (< 1s p95)
  - [ ] 5.4 Continuous aggregates TimescaleDB si nécessaire

- [ ] **Task 6: Visualization Performance** (AC: 6)
  - [ ] 6.1 Optimiser rendering charts (Recharts)
  - [ ] 6.2 Lazy loading données charts (load on scroll)
  - [ ] 6.3 Benchmark visualisations (60fps)
  - [ ] 6.4 Web Workers si nécessaire (rendering asynchrone)

---

## Dev Notes

- Dépendance : Stories 5.1, 5.2, 5.3, 5.4 (Analytics services).
- Performance critique : queries < 1s (p95), visualisations 60fps (roadmap).
- Pré-calcul métriques en background pour éviter latence.
- Référencer `docs/roadmap-trading-path-journal.md` Phase 5 (UI Analytics).
