# Story 12.4: 6-Step Analysis Engine - Institutional Flux

## Status

**Draft**

---

## Story

**As a** trader,  
**I want** Institutional Flux analysis as part of the 6-step process,  
**so that** I understand institutional money flow.

---

## Acceptance Criteria

1. **AC1**: Step 3 "Institutional Flux" analyse flux institutionnels.
2. **AC2**: Source données : TradingView API ou Barchart (ou injection manuelle).
3. **AC3**: Prompt AI inclut checklist flux (volume, large orders, etc.).
4. **AC4**: Analyse retourne évaluation flux structurée.

---

## Tasks / Subtasks

- [ ] **Task 1: Institutional Flux Data** (AC: 2)
  - [ ] 1.1 Intégrer TradingView API ou Barchart API
  - [ ] 1.2 Fallback : injection manuelle données
  - [ ] 1.3 UI injection manuelle flux institutionnels
  - [ ] 1.4 ⚠️ **NOTIFICATION PM** : TradingView/Barchart API requise

- [ ] **Task 2: Flux Analysis** (AC: 1, 3)
  - [ ] 2.1 Google Gemini API avec prompt flux (préféré à OpenAI GPT-4o)
  - [ ] 2.2 Prompt template inclut checklist flux (volume, large orders, etc.)
  - [ ] 2.3 Analyse retourne évaluation flux structurée
  - [ ] 2.4 Stocker résultats dans `DailyBiasAnalysis.institutionalFluxAnalysis` (JSON)

---

## Dev Notes

- Dépendance : Phase 3 (AI - Google Gemini API préféré), Phase 2 (Data Collection).
- ⚠️ **NOTIFICATION PM** : Google Gemini API requise (préféré à OpenAI GPT-4o, ou OpenAI en fallback).
- TradingView/Barchart API requise pour données flux institutionnels.
- Stocker toutes les analyses en JSON (Prisma JSON field).
- Référencer `docs/roadmap-trading-path-journal.md` Phase 11 (6-Step Analysis Engine - Step 3 Institutional Flux).
