# Story 3.4: Broker Sync - Integration 50+ Priority Brokers

## Status

**Draft**

---

## Story

**As a** trader,  
**I want** to sync trades from 50+ priority brokers,  
**so that** I can import my trading data automatically from major brokers.

---

## Acceptance Criteria

1. **AC1**: Liste 50+ brokers prioritaires définie (avec statut : API/File Upload/Coming Soon).
2. **AC2**: Intégration API complétée pour au moins 10 brokers prioritaires.
3. **AC3**: Intégration File Upload (CSV/Excel) pour brokers sans API.
4. **AC4**: Product Manager notifié pour chaque nouveau broker (governance rules).
5. **AC5**: Documentation intégration (README, API docs) pour chaque broker.
6. **AC6**: Taux succès sync > 95% pour brokers intégrés.

---

## Tasks / Subtasks

- [ ] **Task 1: Broker Priority List** (AC: 1)
  - [ ] 1.1 Créer liste 50+ brokers prioritaires (recherche, prioritisation)
  - [ ] 1.2 Définir statut par broker (API, File Upload, Coming Soon)
  - [ ] 1.3 Documenter dans `docs/brokers/broker-list.md`

- [ ] **Task 2: API Integration (10+ brokers)** (AC: 2, 4)
  - [ ] 2.1 Recherche API pour chaque broker (docs, auth, endpoints)
  - [ ] 2.2 Notifier PM pour chaque API identifiée
  - [ ] 2.3 Implémenter provider pour 10+ brokers (par batch)
  - [ ] 2.4 Tests avec comptes réels (staging)

- [ ] **Task 3: File Upload Integration** (AC: 3)
  - [ ] 3.1 Support CSV/Excel upload (existant partiellement)
  - [ ] 3.2 Mapping configurable par broker (ImportProfile)
  - [ ] 3.3 Validation formats (CSV, Excel, JSON, XML)
  - [ ] 3.4 UI upload pour brokers sans API

- [ ] **Task 4: Notification PM** (AC: 4)
  - [ ] 4.1 Processus notification (format défini roadmap)
  - [ ] 4.2 Documenter chaque API (coûts, docs, coverage)
  - [ ] 4.3 Obtenir validation avant implémentation

- [ ] **Task 5: Documentation** (AC: 5)
  - [ ] 5.1 README par broker (auth, endpoints, mapping)
  - [ ] 5.2 Exemples code (si nécessaire)
  - [ ] 5.3 Troubleshooting guide

- [ ] **Task 6: Success Rate** (AC: 6)
  - [ ] 6.1 Monitoring taux succès sync (logs, metrics)
  - [ ] 6.2 Alertes si taux < 95%
  - [ ] 6.3 Amélioration continue (fix bugs, retry logic)

---

## Dev Notes

- ⚠️ **CRITIQUE** : Notification immédiate PM requise pour chaque broker (voir `docs/roadmap-trading-path-journal.md` Section 5).
- Research approfondie sur chaque broker avant implémentation (governance rules).
- Tests avec comptes réels en staging (ne pas utiliser prod).
- Architecture extensible : réutiliser patterns existants (Tradovate, IBKR).
- Référencer `docs/roadmap-trading-path-journal.md` Phase 2 (Intégration 50+ brokers).
