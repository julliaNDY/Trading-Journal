# Story 7.3: Trade History Calendar - Advanced Search

## Status

**Draft**

---

## Story

**As a** trader,  
**I want** a calendar view with advanced search for my trade history,  
**so that** I can quickly find and navigate trades by date.

---

## Acceptance Criteria

1. **AC1**: Page `/trades/calendar` avec vue calendrier trades.
2. **AC2**: Calendrier affiche PnL quotidien (color-coded).
3. **AC3**: Recherche avancée (date range, symbol, tags, account).
4. **AC4**: Click sur jour ouvre modal/drawer avec trades du jour.
5. **AC5**: Navigation calendrier (mois précédent/suivant).
6. **AC6**: Performance : chargement calendrier < 1s.

---

## Tasks / Subtasks

- [ ] **Task 1: Calendar Page** (AC: 1)
  - [ ] 1.1 Créer `src/app/(dashboard)/trades/calendar/page.tsx`
  - [ ] 1.2 Layout calendrier (calendar + filters)
  - [ ] 1.3 Navigation (ajouter route dans sidebar)
  - [ ] 1.4 Server component pour données initiales (trades par date)

- [ ] **Task 2: Calendar Display** (AC: 2)
  - [ ] 2.1 Calendrier affiche PnL quotidien (color-coded)
  - [ ] 2.2 Couleurs : vert (PnL > 0), rouge (PnL < 0), gris (aucun trade)
  - [ ] 2.3 Intensité couleur (selon montant PnL)
  - [ ] 2.4 Composant calendrier (react-calendar ou custom)

- [ ] **Task 3: Advanced Search** (AC: 3)
  - [ ] 3.1 Recherche date range (DatePicker)
  - [ ] 3.2 Recherche symbol (Select multi)
  - [ ] 3.3 Recherche tags (Select multi)
  - [ ] 3.4 Recherche account (Select multi)
  - [ ] 3.5 Actions `getTradesByFilters(filters)` avec filtres

- [ ] **Task 4: Day Modal/Drawer** (AC: 4)
  - [ ] 4.1 Click sur jour ouvre modal/drawer avec trades du jour
  - [ ] 4.2 Affichage trades du jour (liste + détails)
  - [ ] 4.3 PnL total du jour
  - [ ] 4.4 Liens vers détails trades
  - [ ] 4.5 UI shadcn/ui (Dialog, Drawer)

- [ ] **Task 5: Calendar Navigation** (AC: 5)
  - [ ] 5.1 Navigation calendrier (mois précédent/suivant)
  - [ ] 5.2 Boutons navigation (prev/next month)
  - [ ] 5.3 Sélection mois/année (DatePicker)
  - [ ] 5.4 URL params pour navigation (shareable links)

- [ ] **Task 6: Performance Optimization** (AC: 6)
  - [ ] 6.1 Optimiser chargement calendrier (< 1s)
  - [ ] 6.2 Cache données calendrier (Redis)
  - [ ] 6.3 Lazy loading données (load on scroll)
  - [ ] 6.4 Benchmark performance (Lighthouse)

---

## Dev Notes

- Dépendance : Epic 3 (Données collectées).
- Calendrier : react-calendar ou custom component (shadcn/ui).
- Performance : cache données calendrier pour éviter queries excessives.
- Référencer `docs/roadmap-trading-path-journal.md` Phase 7 (Trade History Calendar).
