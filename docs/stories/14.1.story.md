# Story 14.1: Video Upload & AI Analysis

## Status

**Draft**

---

## Story

**As a** trader,  
**I want** to upload trading videos and get AI analysis,  
**so that** I can receive feedback on my trading execution.

---

## Acceptance Criteria

1. **AC1**: Interface upload vidéo (drag & drop ou file picker).
2. **AC2**: Vidéo stockée dans Supabase Storage ou S3.
3. **AC3**: AI analyse vidéo (Google Gemini Vision API préféré, ou OpenAI Vision API en fallback).
4. **AC4**: Analyse retourne conseils trading/feedback.
5. **AC5**: Performance : analyse < 1min pour vidéo de 5min.

---

## Tasks / Subtasks

- [ ] **Task 1: Video Upload** (AC: 1, 2)
  - [ ] 1.1 Interface upload (drag & drop ou file picker)
  - [ ] 1.2 Validation format vidéo (MP4, MOV, etc.)
  - [ ] 1.3 Upload vers Supabase Storage ou AWS S3
  - [ ] 1.4 UI shadcn/ui Dropzone ou Input file

- [ ] **Task 2: Video Storage** (AC: 2)
  - [ ] 2.1 Configurer Supabase Storage bucket "trading-videos" ou S3
  - [ ] 2.2 Stocker métadonnées vidéo en DB (table `VideoAnalysis`)
  - [ ] 2.3 Lier vidéo à utilisateur (userId)

- [ ] **Task 3: AI Video Analysis** (AC: 3)
  - [ ] 3.1 Google Gemini Vision API (préféré) ou OpenAI Vision API (fallback)
  - [ ] 3.2 Traitement vidéo : extraction frames ou transcription vidéo
  - [ ] 3.3 Analyse vidéo avec AI (conseils trading)
  - [ ] 3.4 ⚠️ **NOTIFICATION PM** : Google Gemini Vision API ou OpenAI Vision API requise

- [ ] **Task 4: Analysis Results** (AC: 4)
  - [ ] 4.1 Stocker analyse dans `VideoAnalysis.analysis` (JSON ou text)
  - [ ] 4.2 Afficher analyse dans UI (page vidéo detail)
  - [ ] 4.3 Format conseils structuré (bullet points, sections)
  - [ ] 4.4 UI shadcn/ui Card, Badge, Separator

- [ ] **Task 5: Performance & Processing** (AC: 5)
  - [ ] 5.1 Async processing (BullMQ) pour analyse vidéo background
  - [ ] 5.2 Progress bar pendant analyse
  - [ ] 5.3 Benchmark analyse (< 1min pour 5min vidéo)
  - [ ] 5.4 Notification utilisateur quand analyse complète

---

## Dev Notes

- Dépendance : Phase 3 (AI - Google Gemini Vision API préféré).
- ⚠️ **NOTIFICATION PM** : Google Gemini Vision API ou OpenAI Vision API requise (budget validation).
- Async processing nécessaire (analyses vidéo peuvent être longues).
- Référencer `docs/roadmap-trading-path-journal.md` Phase 12 (Video AI Analysis).
