# Story 12.5: 6-Step Analysis Engine - Mag 7 Leaders

## Status

**Draft**

---

## Story

**As a** trader,  
**I want** Mag 7 Leaders analysis as part of the 6-step process,  
**so that** I understand tech leaders' impact.

---

## Acceptance Criteria

1. **AC1**: Step 4 "Mag 7 Leaders" analyse AAPL, MSFT, GOOGL, AMZN, META, NVDA, TSLA.
2. **AC2**: Source données : Market data API (Barchart, Alpha Vantage, etc.).
3. **AC3**: Prompt AI inclut checklist Mag 7 (performance, correlation, etc.).
4. **AC4**: Analyse retourne évaluation Mag 7 structurée.

---

## Tasks / Subtasks

- [ ] **Task 1: Mag 7 Data** (AC: 2)
  - [ ] 1.1 Market data API integration (Barchart, Alpha Vantage)
  - [ ] 1.2 Récupérer données Mag 7 (AAPL, MSFT, GOOGL, AMZN, META, NVDA, TSLA)
  - [ ] 1.3 ⚠️ **NOTIFICATION PM** : Market data API requise

- [ ] **Task 2: Mag 7 Analysis** (AC: 1, 3)
  - [ ] 2.1 Google Gemini API avec prompt Mag 7 (préféré à OpenAI GPT-4o)
  - [ ] 2.2 Prompt template inclut checklist Mag 7 (performance, correlation, etc.)
  - [ ] 2.3 Analyse retourne évaluation Mag 7 structurée
  - [ ] 2.4 Stocker résultats dans `DailyBiasAnalysis.mag7Analysis` (JSON)

---

## Dev Notes

- Dépendance : Phase 3 (AI - Google Gemini API préféré), Phase 2 (Data Collection).
- ⚠️ **NOTIFICATION PM** : Google Gemini API requise (préféré à OpenAI GPT-4o, ou OpenAI en fallback).
- Market data API requise (Barchart, Alpha Vantage) pour données Mag 7.
- Stocker toutes les analyses en JSON (Prisma JSON field).
- Référencer `docs/roadmap-trading-path-journal.md` Phase 11 (6-Step Analysis Engine - Step 4 Mag 7 Leaders).
