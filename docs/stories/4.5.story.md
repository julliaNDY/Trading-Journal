# Story 4.5: Emotional Journal - Pre/During/Post Trade Journaling

## Status

**Draft**

---

## Story

**As a** trader,  
**I want** to journal my emotions before/during/after trades,  
**so that** I can understand the psychological impact on my trading decisions.

---

## Acceptance Criteria

1. **AC1**: Data model Emotional Journal (table `EmotionalJournal` liée aux trades).
2. **AC2**: UI pour saisir émotions (avant/pendant/après trade).
3. **AC3**: Champs : moodBefore, moodDuring, moodAfter, notes (text).
4. **AC4**: Affichage émotions sur page trade detail.
5. **AC5**: Analyse patterns émotionnels (corrélation émotions vs performances).
6. **AC6**: Visualisation évolution émotions (graphique timeline).

---

## Tasks / Subtasks

- [ ] **Task 1: Data Model** (AC: 1)
  - [ ] 1.1 Créer table `EmotionalJournal` (Prisma schema)
  - [ ] 1.2 Champs : tradeId, userId, moodBefore, moodDuring, moodAfter, notes, createdAt
  - [ ] 1.3 Relation : EmotionalJournal (1) → (1) Trade
  - [ ] 1.4 Migration Prisma

- [ ] **Task 2: Emotional Journal UI** (AC: 2)
  - [ ] 2.1 Composant EmotionalJournal dans `src/components/journal/emotional-journal.tsx`
  - [ ] 2.2 Formulaire (React Hook Form + Zod)
  - [ ] 2.3 Champs : moodBefore, moodDuring, moodAfter (select/rating), notes (textarea)
  - [ ] 2.4 UI shadcn/ui (Select, Textarea, Rating)

- [ ] **Task 3: Mood Input** (AC: 3)
  - [ ] 3.1 Champs moodBefore, moodDuring, moodAfter (enum ou scale 1-10)
  - [ ] 3.2 Validation (Zod schema)
  - [ ] 3.3 Optionnel : notes (text libre)
  - [ ] 3.4 Action `saveEmotionalJournal(tradeId, data)`

- [ ] **Task 4: Trade Detail Display** (AC: 4)
  - [ ] 4.1 Afficher émotions sur page trade detail
  - [ ] 4.2 Composant affichage (badges, icons pour moods)
  - [ ] 4.3 Lien vers journal émotionnel (si existant)
  - [ ] 4.4 Action edit si nécessaire

- [ ] **Task 5: Pattern Analysis** (AC: 5)
  - [ ] 5.1 Service analyse patterns (corrélation émotions vs performances)
  - [ ] 5.2 Calcul corrélations (ex: moodBefore négatif → trade perdant)
  - [ ] 5.3 Affichage insights (dashboard ou page dédiée)
  - [ ] 5.4 Visualisation corrélations

- [ ] **Task 6: Timeline Visualization** (AC: 6)
  - [ ] 6.1 Graphique évolution émotions (Recharts)
  - [ ] 6.2 Timeline avec moods (avant/pendant/après)
  - [ ] 6.3 Page `/emotional-journal` ou section dashboard
  - [ ] 6.4 Filtres (date range, symbol)

---

## Dev Notes

- Dépendance : Epic 3 (Données collectées).
- MVP : journalisation manuelle. Future : AI suggestions basées sur patterns.
- UI simple : formulaire avec sélection moods (scale 1-10 ou enum).
- Référencer `docs/roadmap-trading-path-journal.md` Phase 3 (Emotional Journal).
